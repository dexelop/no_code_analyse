# 📊 [V2] AI 분개장 기반 재무 예측 및 세무 컨설팅 시스템 기획서

## 1. 프로젝트 개요
* **목표:** ERP 분개장 데이터를 분석하여 '실시간 예상 손익(Landing)'을 산출하고, '납부 예상 세액'까지 정밀 예측하여 경영 리스크를 사전 관리함.
* **차별점:** 단순 집계가 아닌, **누락된 데이터(Gap)를 AI가 능동적으로 탐지 및 보정**하고, **과거 신고서 기반의 정밀 세금 예측**을 수행.

## 2. 데이터 아키텍처 (Data Inputs)
### 2.1. 기준 데이터 (Reference Set - 2024년)
* **분개장 (Journal):** 월별 비용 패턴(고정비, 변동비, 계절성) 학습용.
* **합계잔액시산표 (Trial Balance):** 자산/부채 기초 잔액 및 계정 분류 기준.
* **⭐ 소득세 신고서 데이터 (`rec_prd.json`):**
    * **역할:** '세무 조정' 및 '공제 내역'의 정답지.
    * **추출 항목:** 타소득 합산액, 소득공제 총액(노란우산 등), 세액감면 여부.

### 2.2. 분석 데이터 (Target Set - 2025년)
* **분개장 (Journal):** 현재 진행 중인 불완전한 데이터.
* **특징:** 입력 시차(Time-Lag)로 인해 최근 1~2개월 데이터가 급감하거나, 특정 전표(카드/현금)가 통째로 누락되는 경향 있음.

## 3. 핵심 분석 알고리즘 (Logic)

### 3.1. 손익 보정 (Gap Filling & Correction)
* **누락 탐지 로직:**
    * **전표 유형별 분석:** 세금계산서(매입전표) vs 영수증(일반전표) 비율을 전년도와 비교.
        * *Condition:* "매출 대비 일반전표 비율이 전년도 60% 미만이면 누락 경고."
    * **거래처별 추적:** 주요 소매점(마트, 식당) 및 공과금 거래처의 최근 3개월 내역 부재 확인.
* **보정 실행 (Simulation):**
    * **Auto-Fill:** 고정비(임차료 등)는 전월 데이터 복사.
    * **Ratio-Based:** 변동비(식대, 소모품)는 전년도 매출액 대비 비율(%)을 적용하여 강제 주입.
    * **Seasonality:** 12월 접대비/회식비 등 특수 시즌 비용은 전년 동월 절대값 적용.

### 3.2. 정밀 세무 예측 (Tax Forecasting)
* **과세표준 산출 공식:**
    `예상 당기순이익(보정후)` + `타소득(rec_prd 참조)` + `비용부인액(User Input)` - `소득공제(rec_prd 참조)`
* **세액 계산:**
    * 소득 구간별 누진세율(6%~45%) 자동 적용.
    * 세액감면(중소기업 특별세액 등) 적용 여부는 전년도 신고서(`rec_prd`)의 감면 코드를 기준으로 판단.

## 4. 사용자 인터랙션 및 컨설팅 프로세스 (User Flow)
1.  **초기 진단:** "현재 이익 1억 원은 허수입니다. 카드 비용 5,000만 원이 누락되었습니다."
2.  **보정 제안:** "전년도 패턴대로 비용을 채워넣어 현실적인 이익(5,600만 원)으로 다시 계산할까요?" (User Confirm)
3.  **세금 시뮬레이션:**
    * "작년 신고 내역을 보니 공제액이 1,650만 원입니다. 이를 적용하면 예상 세금은 680만 원입니다."
4.  **절세 액션 플랜:**
    * "과세표준이 4,900만 원입니다. 12월에 300만 원만 더 쓰면 세율이 15%로 떨어져 세금을 100만 원 더 아낍니다."

## 5. 개발 시 주의사항 (Constraint)
* **데이터 정제:** 12월 31일자 '결산 분개(손익 대체)'는 패턴 분석 시 반드시 제외(Filter Out)해야 함.
* **보수적 접근:** 자금 계획용 리포트이므로, 비용은 적게 잡기보다 넉넉하게 잡고, 세금은 최대치(Max)로 예측하여 '자금 펑크'를 방지해야 함.
* **예외 처리:** `rec_prd.json`에 없는 조정 내역(예: 차량비용 부인)은 반드시 사용자에게 수기 입력(Input)을 요청해야 함.